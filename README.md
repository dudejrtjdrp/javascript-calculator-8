![image](https://i.namu.wiki/i/rkeJ0R-eEemGaGRZOYPBGMO262V8wyDiDD5l-W1088GmY5tBIug6TdqmRym8vVAuAQol_-sPTw2IP4KcuoCoWrdo8Vk_sIiaVn_kSfae2qfc2eITQShNAOmKm2JVVEhMEw_x-Ho69-p9xZlJEYH8pQ.webp)

# 우테코 8기 프리코스 1주차 - 문자열 덧셈 계산기

> 우아한테크코스 8기 1주차 미션, 문자열 덧셈 계산기을 구현한 저장소입니다.

# 목차

1.  [시작하기](#시작하기)
2.  [문제 설명](#문제-설명)
    - [문제](#문제)
    - [입력](#입력)
    - [출력](#출력)
    - [실행 결과 예시](#실행-결과-예시)
3.  [구현 기능 목록](#구현-기능-목록)
    - [프로그램 실행 설정](#프로그램-실행-설정)
    - [입력](#입력)
      - 입력 처리
      - 입력값 검증
    - [출력](#출력)
      - 출력 처리
      - 에러 처리
    - [유틸](#유틸)
      - 기본 구분자 계산기
        - 숫자/문자열 분리 로직
        - 합산 로직
      - 커스텀 구분자 계산기
        - 커스텀 구분자 추출 로직
    - [예외 처리](#예외-처리)
    - [유닛 테스트](#유닛-테스트)

---

## 시작하기

해당 레포지토리를 Clone하고 IDE에서 /javascript-calculator-8 에서 npm install을 진행 후 npm start를 실행시켜 프로그램을 동작시킬 수 있습니다.

git clone https://github.com/dudejrtjdrp/javascript-calculator-8.git

---

## 🎯 기능 요구 사항

- 입력한 문자열에서 숫자를 추출하여 더하는 계산기를 구현한다.

- 쉼표(,) 또는 콜론(:)을 구분자로 가지는 문자열을 전달하는 경우 구분자를 기준으로 분리한 각 숫자의 합을 반환한다.

  - 예: "" => 0, "1,2" => 3, "1,2,3" => 6, "1,2:3" => 6

- 앞의 기본 구분자(쉼표, 콜론) 외에 커스텀 구분자를 지정할 수 있다. 커스텀 구분자는 문자열 앞부분의 "//"와 "\n" 사이에 위치하는 문자를 커스텀 구분자로 사용한다.

  - 예를 들어 "//;\n1;2;3"과 같이 값을 입력할 경우 커스텀 구분자는 세미콜론(;)이며, 결과 값은 6이 반환되어야 한다.

- 사용자가 잘못된 값을 입력할 경우 "[ERROR]"로 시작하는 메시지와 함께 Error를 발생시킨 후 애플리케이션은 종료되어야 한다.

### ⌨️ 입력

- 구분자와 양수로 구성된 문자열

### 📤 출력

- 덧셈 결과

```
결과 : 6
```

### 💡 실행 결과 예시

```
덧셈할 문자열을 입력해 주세요.
1,2:3
결과 : 6
```

---

## ✅ 구현 기능 목록

### 프로그램 실행 설정

### 입력

- 입력 처리
  - 사용자에게서 문자열 **입력**을 받는 기능

### 출력

- 출력 처리
  - 받은 입력값으로 계산된 결과를 **출력**하는 기능

### 유틸

- 기본 구분자 계산기
  - 숫자/문자열 분리 로직
    - 기본 구분자(쉼표, 콜론)로 **문자열에서 숫자를 분리**하는 기능
  - 합산 로직
    - 분리한 숫자들을 **합산**하는 기능
- 커스텀 구분자 계산기
  - 커스텀 구분자 추출 로직
    - 커스텀 구분자 형식의 문자열에서 **커스텀 구분자와 계산할 문자열을 추출**하는 기능
      > 커스텀 구분자 형식 : //{delimiter}\n{numbers+delimiters}
      >
      > > ex) //!\n1!2!3 -> 결과 : 6
  - 구분자에 개행문자가 포함되었을 경우 탐색 후 구분자 추출 로직
    - 구분자에 개행문자 + 다른 문자들이 들어올 경우 구분자를 구하는 기능
      - 자세한 내용은 기능 구현 상세를 참고

### 예외 처리

- 조건 정리
  - 에러가 생길수 있는 다양한 조건 정리
    - 자세한 내용은 기능 구현 상세를 참고
- 입력값 검증
  - 입력값을 받을때 기능 요구 사항 + 기준에 맞춰 검증
    - 자세한 내용은 기능 구현 상세를 참고
- 에러 처리
  - 정리해둔 조건들과 기능 요구사항에 맞춰 에러 처리
    - 자세한 내용은 기능 구현 상세를 참고

### 유닛 테스트

- 정리해둔 조건들을 바탕으로 다양한 케스트 케이스 작성
  - 자세한 내용은 기능 구현 상세를 참고

---

## 📘 기능 구현 상세

- 기능 구현은 가장 기본적인 입/출력부터 계산, 일반 구분자 분리, 커스텀 구분자 분리, 예외 처리, 테스트 케이스 설정, 리팩토링 순으로 진행되었다.
- 이 항목에서는 기능을 구현한 과정과 고민했던것, 결정한것을 상세하게 보여준다.

### 1. 입력 / 출력

- Console.readLineAsync로 사용자 입력을 받고, OutputHandler.print()로 결과 출력
- 빈 문자열 입력 시 0 출력
- 잘못된 입력(음수, 문자 포함, 잘못된 커스텀 구분자) 시 [ERROR] 메시지와 함께 Error 발생

### 2. 기본 구분자 계산기

- 기본 구분자: 쉼표(,), 콜론(:)
- 문자열을 정규식으로 분리하여 숫자 추출 후 합산
- 예외 사항 처리:
  - 숫자가 아닌 값이나 빈 값 존재 시 `[ERROR] 입력 형식이 올바르지 않습니다.` 발생

### 3. 커스텀 구분자 계산기

- 형식: `//{delimiter}\n{numbers+delimiters}`
- 구분자 검증:
  - 숫자만 구분자 → 에러
  - 시작/끝이 숫자인 구분자 → 에러
  - 빈 문자열 구분자 → 에러
- 숫자 문자열을 구분자로 분리 후 합산
- 개행 문자가 포함된 경우에도 정상 처리

### 4. 예외 처리

- 입력값 예외 처리:
  - 빈 문자열 → 0 출력
  - 음수 → `[ERROR] 숫자는 양수만 허용됩니다.` 발생
  - 숫자 외 문자 포함 → `[ERROR] 입력 형식이 올바르지 않습니다.` 발생
  - 잘못된 커스텀 구분자 → `[ERROR] 구분자 외의 문자가 포함되어 있습니다.` 발생
  - 등 여러 조건 정리 하단 참고
- 모든 에러 메시지는 `[ERROR]`로 시작하며 프로그램 즉시 종료

### 5. 유닛 테스트

- Jest로 다양한 입력값 테스트
- 모든 테스트 통과 시 안정적인 동작 보장

### 6. 리팩토링 및 유지보수

- 상수 분리: `ERROR_PREFIX`, `INVALID_FORMAT_ERROR`
- 입력, 출력, 예외 처리, 계산 로직 클래스로 분리
- 향후 커스텀 구분자 추가 및 규칙 변경 용이

---

# 예외사항 정리

문자열에 숫자만 있을 경우 혹은 커스텀 구분자에서 숫자만 있을 경우

숫자 그대로 반환

문자열이 없을 경우

0 반환

커스텀 구분자에서도 일반 구분자들 사용 가능

# 에러사항 정리

## 공통 에러사항

- 입력 형식이 어긋난 경우

  - 지정한 구분자(, | : | etc )가 아닌 경우
  - 문자열의 숫자들이 양수가 아닌 경우

- (구분자를 제외한)문자열의 시작이나 마지막이 숫자(양수)가 아닌 경우
  - ex) -1,2,3 / 1,2,3. / .3,1,2
    ex) //!\n!1!2,@ / //!\n.3!1!,2 / //!\n-3!1!2 / //!\n3!1!-2
- 구분자를 두 숫자 사이에서 반복해서 사용한 경우
  - ex) 1,,2,3 / 1,:2:3 / 1:2,,3 / 1:,2,,:3
    ex) //!\n1!,2!:3 / //!\n1!2,!3

## 커스텀 구분자 에러사항

- 커스텀 구분자 형식이 지켜지지 않았을 경우

- 커스텀 구분자의 시작과 끝이 숫자일 경우 or 숫자로만 이루어질 경우

- 커스텀 구분자의 형식을 지키지 않았을 경우

- 구분자가 빈칸인 경우

- 지정한 구분자가 아닌 경우

- 구분자로 나눴을때 숫자 부분에 위치한 문자가 숫자가 아닐 경우

- 커스텀 구분자에 개행문자(\n)가 포함될 경우
  - 개행문자는 구분자와 문자열을 나눠주는 규칙 구분자기때문에 사용 X
